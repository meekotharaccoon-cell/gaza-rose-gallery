<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gaza Rose Gallery ðŸŒ¹ â€” $1 Art for Palestine</title>
<style>
  :root { --rose:#ff2d6b;--gold:#ffd700;--dark:#0a0a0a;--panel:#111 }
  *{box-sizing:border-box;margin:0;padding:0}
  body{background:var(--dark);color:#eee;font-family:'Georgia',serif;min-height:100vh}
  .hero{text-align:center;padding:60px 20px 40px;background:linear-gradient(135deg,#0a0a0a,#1a0010)}
  .hero h1{font-size:clamp(2rem,6vw,4rem);color:var(--rose);letter-spacing:-1px;margin-bottom:8px}
  .hero .sub{color:rgba(255,255,255,0.6);font-size:1.1rem;margin-bottom:20px}
  .stats{display:flex;gap:20px;justify-content:center;flex-wrap:wrap;margin-bottom:30px}
  .stat{background:rgba(255,45,107,0.1);border:1px solid rgba(255,45,107,0.3);border-radius:12px;padding:12px 20px;text-align:center}
  .stat .num{font-size:1.8rem;font-weight:bold;color:var(--gold)}
  .stat .lbl{font-size:.75rem;color:rgba(255,255,255,0.5);letter-spacing:2px;text-transform:uppercase}
  .mission{background:rgba(255,215,0,0.05);border:1px solid rgba(255,215,0,0.2);border-radius:12px;padding:20px;max-width:600px;margin:0 auto 40px;text-align:center;line-height:1.7;color:rgba(255,255,255,0.75);font-size:.95rem}
  .mission a{color:var(--gold);text-decoration:none}
  .search-bar{max-width:400px;margin:0 auto 40px;padding:0 20px}
  .search-bar input{width:100%;background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.15);border-radius:8px;padding:10px 16px;color:#fff;font-size:1rem;outline:none}
  .search-bar input:focus{border-color:var(--rose)}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px;padding:0 20px 60px;max-width:1400px;margin:0 auto}
  .card{background:var(--panel);border:1px solid rgba(255,255,255,0.08);border-radius:16px;overflow:hidden;transition:all .3s;cursor:pointer}
  .card:hover{transform:translateY(-4px);border-color:rgba(255,45,107,0.4);box-shadow:0 20px 40px rgba(255,45,107,0.15)}
  .card-img-wrap{position:relative;width:100%;aspect-ratio:1;overflow:hidden}
  .card-img-placeholder{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:3rem;opacity:0.4}
  .card-img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;display:none;transition:transform .4s}
  .card:hover .card-img{transform:scale(1.05)}
  .card-info{padding:14px}
  .card-name{font-size:.9rem;font-weight:bold;color:#fff;margin-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .card-price{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
  .price-tag{color:var(--gold);font-size:1.1rem;font-weight:bold}
  .pcrf-badge{font-size:.65rem;color:rgba(255,255,255,0.4);letter-spacing:1px}
  .lightbox{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.95);z-index:1000;align-items:center;justify-content:center;flex-direction:column;padding:20px}
  .lightbox.active{display:flex}
  .lightbox img{max-width:90vw;max-height:70vh;object-fit:contain;border-radius:12px;box-shadow:0 0 60px rgba(255,45,107,0.3)}
  .lightbox-name{color:#fff;font-size:1.4rem;margin-top:16px;text-align:center}
  .lightbox-price{color:var(--gold);font-size:1rem;margin-top:4px}
  .lightbox-close{position:absolute;top:20px;right:24px;color:rgba(255,255,255,0.5);font-size:2rem;cursor:pointer;background:none;border:none;line-height:1}
  .lightbox-paypal{margin-top:16px}
  .footer{text-align:center;padding:40px;border-top:1px solid rgba(255,255,255,0.08);color:rgba(255,255,255,0.3);font-size:.85rem}
  .footer a{color:var(--rose);text-decoration:none}
  @media(max-width:600px){.grid{grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px}}
</style>
</head>
<body>
<div class="hero">
  <h1>ðŸŒ¹ Gaza Rose Gallery</h1>
  <p class="sub">Original AI Floral Art â€” $1 Each â€” 70% to Palestinian Children</p>
  <div class="stats">
    <div class="stat"><div class="num">69</div><div class="lbl">Artworks</div></div>
    <div class="stat"><div class="num">$1</div><div class="lbl">Per Piece</div></div>
    <div class="stat"><div class="num">70%</div><div class="lbl">To PCRF</div></div>
    <div class="stat"><div class="num">300</div><div class="lbl">DPI</div></div>
  </div>
  <div class="mission">
    Every purchase sends 70% directly to the <a href="https://www.pcrf.net" target="_blank">Palestine Children's Relief Fund</a>.
    Instant download. No account needed. Just $1 per original piece.
  </div>
  <div class="search-bar">
    <input type="text" id="search" placeholder="Search art by name..." oninput="filterGallery()">
  </div>
</div>

<div class="grid" id="gallery"></div>

<div class="lightbox" id="lightbox">
  <button class="lightbox-close" onclick="closeLightbox()">âœ•</button>
  <img id="lb-img" src="" alt="">
  <div class="lightbox-name" id="lb-name"></div>
  <div class="lightbox-price">$1.00 Â· 300 DPI Â· Instant Download</div>
  <div class="lightbox-paypal" id="lb-paypal"></div>
</div>

<div class="footer">
  <p>Gaza Rose Gallery Â· <a href="https://www.pcrf.net" target="_blank">PCRF.net</a> Â· Open Source Â· Made with love ðŸŒ¹</p>
  <p style="margin-top:8px">Questions? <a href="mailto:mickowood86@gmail.com">mickowood86@gmail.com</a></p>
</div>

<script src="https://www.paypal.com/sdk/js?client-id=AYONTtLaiBsOe-z3k7XSjZyHiE8NhapYPTYb2PkbqU0hPgXoC_J-dseyAeOqefIHU2FXAjHDne-PyeY8&currency=USD"></script>
<script>
const RAW_BASE = 'https://raw.githubusercontent.com/meekotharaccoon-cell/gaza-rose-gallery/main/art/';
const RELEASE_BASE = 'https://github.com/meekotharaccoon-cell/gaza-rose-gallery/releases/download/v1.0-art-collection/';
const COLORS = ['#3d0020','#002020','#1a0030','#001a10','#200010','#0a2000','#1a1000','#00102a'];

let artData = [];
let currentIndex = 0;

function buildGallery(arts) {
  const grid = document.getElementById('gallery');
  grid.innerHTML = '';
  arts.forEach((art, i) => {
    const card = document.createElement('div');
    card.className = 'card';
    const color = COLORS[i % COLORS.length];
    card.innerHTML = `
      <div class="card-img-wrap" style="background:linear-gradient(135deg,${color},#0a0a0a)" onclick="openLightbox(${art._idx})">
        <div class="card-img-placeholder">ðŸŒ¹</div>
        <img class="card-img"
             src="${RAW_BASE}${art.file}"
             alt="${art.name}"
             loading="lazy"
             onload="this.style.display='block';this.previousElementSibling.style.display='none'"
             onerror="this.style.display='none'">
      </div>
      <div class="card-info">
        <div class="card-name" title="${art.name}">${art.name}</div>
        <div class="card-price">
          <span class="price-tag">$1.00</span>
          <span class="pcrf-badge">70% â†’ PCRF</span>
        </div>
        <div id="pp-btn-${art._idx}"></div>
      </div>`;
    grid.appendChild(card);

    setTimeout(() => {
      const el = document.getElementById('pp-btn-' + art._idx);
      if (!el || el.children.length) return;
      const a = artData[art._idx];
      paypal.Buttons({
        style:{layout:'horizontal',color:'black',shape:'rect',label:'buynow',height:32,tagline:false},
        createOrder:(_,actions)=>actions.order.create({purchase_units:[{amount:{value:'1.00'},description:'Gaza Rose â€” '+a.name+' (300 DPI)'}]}),
        onApprove:async(_,actions)=>{
          await actions.order.capture();
          const link=document.createElement('a');link.href=a.downloadUrl;link.download=a.file;link.target='_blank';
          document.body.appendChild(link);link.click();document.body.removeChild(link);
          alert('Thank you! Downloading "'+a.name+'". 70% goes to PCRF. ðŸŒ¹');
        },
        onError:()=>window.open(a.downloadUrl,'_blank')
      }).render('#pp-btn-'+art._idx);
    }, i * 60);
  });
}

function openLightbox(idx) {
  currentIndex = idx;
  const art = artData[idx];
  document.getElementById('lb-img').src = RAW_BASE + art.file;
  document.getElementById('lb-img').onerror = function(){
    this.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='400' height='400'><rect fill='%23200010' width='400' height='400'/><text x='50%' y='50%' font-size='80' text-anchor='middle' dominant-baseline='middle'>ðŸŒ¹</text></svg>";
  };
  document.getElementById('lb-name').textContent = art.name;
  const lb = document.getElementById('lightbox');
  lb.classList.add('active');
  const ppEl = document.getElementById('lb-paypal');
  ppEl.innerHTML = '<div id="lb-pp"></div>';
  paypal.Buttons({
    style:{layout:'vertical',color:'gold',shape:'rect',label:'pay',height:45},
    createOrder:(_,actions)=>actions.order.create({purchase_units:[{amount:{value:'1.00'},description:'Gaza Rose â€” '+art.name}]}),
    onApprove:async(_,actions)=>{
      await actions.order.capture();
      const link=document.createElement('a');link.href=art.downloadUrl;link.download=art.file;link.target='_blank';
      document.body.appendChild(link);link.click();document.body.removeChild(link);
      closeLightbox();
      alert('Thank you! Downloading "'+art.name+'". 70% goes to PCRF. ðŸŒ¹');
    }
  }).render('#lb-pp');
}

function closeLightbox(){
  document.getElementById('lightbox').classList.remove('active');
  document.getElementById('lb-paypal').innerHTML='';
}

function filterGallery(){
  const q=document.getElementById('search').value.toLowerCase();
  buildGallery(artData.filter(a=>a.name.toLowerCase().includes(q)));
}

document.getElementById('lightbox').addEventListener('click',function(e){if(e.target===this)closeLightbox();});

window.onload = async function(){
  try {
    const r = await fetch('https://api.github.com/repos/meekotharaccoon-cell/gaza-rose-gallery/releases/tags/v1.0-art-collection');
    const rel = await r.json();
    const assets = (rel.assets||[]).filter(a=>/\.(jpg|jpeg|png)$/i.test(a.name));
    if(assets.length > 0){
      artData = assets.map((asset,i)=>{
        const name = asset.name
          .replace(/300\.(JPG|jpg|PNG|png|jpeg)$/i,'')
          .replace(/_BG$/,'').replace(/_/g,' ').replace(/300$/,'').trim()
          .split(' ').map(w=>w.charAt(0).toUpperCase()+w.slice(1).toLowerCase()).join(' ');
        return {name, file:asset.name, downloadUrl:asset.browser_download_url, _idx:i};
      });
    } else throw new Error('no assets');
  } catch(e){
    const names=["Aurora Bloom","Bio Blue","Blaque Light","Bloominescent","Cherry Blossom","Cherry Blossom BG","Chive","Chive BG","Chrysanthemum","Chrysanthemum BG","Coral Rose","Dahlia Dream","Electric Orchid","Emerald Bloom","Fern Glow","Fire Lily","Flame Rose","Frost Bloom","Garden Mist","Ghost Orchid","Glass Rose","Golden Hour","Honey Bloom","Ice Garden","Indigo Petal","Jade Blossom","Lavender Haze","Lily Storm","Lotus Fire","Luna Bloom","Magenta Mist","Midnight Rose","Moonpetal","Mystic Fern","Night Orchid","Neon Petal","Ocean Rose","Pale Rose","Phantom Bloom","Pink Storm","Prism Rose","Purple Haze","Radiant Fern","Rainbow Lily","Red Mist","Rose Gold","Rose Storm","Ruby Glow","Sage Bloom","Sand Rose","Shadow Petal","Silver Orchid","Sky Garden","Solar Rose","Spring Mist","Star Bloom","Stellar Rose","Storm Petal","Summer Glow","Sunset Lily","Teal Rose","Twilight Bloom","Ultra Violet","Velvet Rose","Venus Garden","White Storm","Wild Rose"];
    artData = names.map((name,i)=>{
      const file=name.replace(/ /g,'_')+'300.JPG';
      return {name, file, downloadUrl:RELEASE_BASE+file, _idx:i};
    });
  }
  buildGallery(artData);
};
</script>
</body>
</html>
